#  Тестовое задание в рамках прохождения отбора на backend-стажёра в юнит Авито.Недвижимость

   Был реализован сервис для хранения и подачи объявлений. Объявления хранятся в базе данных, 
спроектирован API для доступа к данным.

## Технологии и язык

* Java  - совместно с фреймворками Spring и Hibernate
* Maven - управление зависимостями
* MySQL - СУБД

## Запуск приложения
```bash
docker build -t advertisement-service .
docker-compose build && docker-compose up
```


## Работа API

Были реализованы 3 метода для работы с данными объявлений.

### Метод получения списка объявлений

Представлена пагинация. По умолчанию, на страницу в формате JSON выводится 10 объявлений со следующими полями: **название объявления (title), цена (price), ссылка на главное фото (mainPhoto), описание (description)** с возможностью сортировки по цене и дате создания.


 1. http://localhost:8080/advertisements/getall?page=1&sort=created,desc)  - 2 страница данных с сортировкой по дате создания в убывающем порядке
 2. http://localhost:8080/advertisements/getall?sort=created,asc         - 1 страница данных с сортировкой по цене в возрастающем порядке
 3. http://localhost:8080/advertisements/getall?size=2&sort=price,asc    - вывод 5 самых дешевых объявлений по цене в возрастающем порядке.

Таким образом, допустимы следующие параметры: **page (номер страницы), size (количество элементов), sort(сортировка по дате (created) или цене (price))**. Порядок параметров не важен. 

### Метод получения конкретного объявления

По умолчанию выводятся следующие поля: **название объявления (title), цена (price), ссылка на главное фото (mainPhoto)**. По параметру fields возможно запросить дополнительно: **описание (description), ссылки на фото (photos)**

 1.http://localhost:8080/advertisements/1?fields=description  - вывод объявления с описанием
 2.http://localhost:8080/advertisements/1?fields=photos       - вывод объявления со ссылками на фото
 3.http://localhost:8080/advertisements/1?fields=description,photos            - вывод объявления id = 1 со всеми полями.

### Метод создания объявления

Для создания объявления отправляется POST запрос в следующем формате: 
```json
{"title":"2-к квартира, 45 м², 2/5 эт", "description":"Полная сумма в договоре. Два взрослых собственника. Звоните, отвечу на все интересующие вопросы, покажу оперативно. Евгения.", "photos": ["https://42.img.avito.st/640x480/8003064942.jpg", "https://53.img.avito.st/640x480/8003067553.jpg", "https://75.img.avito.st/640x480/8003067575.jpg"], "price": 8300.534}
```
Дробная часть цены указывается через точку.

## Ограничения

На уровне проектирования структуры базы данных объявлений заложены следующие ограничения:
-не больше 3 ссылок на фото
-описание не больше 1000 символов 
-название не больше 200 символов

Кроме этого, созданы разные представления: представление с основными полями объявления, отдельное представление со ссылками на фото и т.д. Механизм выдачи выборочных данных по конкретному объявлению построен на данной основе.

## Дополнительно
-a. Написаны юнит-тесты


